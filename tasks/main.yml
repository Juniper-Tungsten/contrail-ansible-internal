---
- stat: path='/usr/bin/docker'
  become: yes
  become_user: root
  register: dockerBinary

- name: install....
  when: dockerBinary.stat.exists == False
  become: yes
  become_user: root
  include: RunInstaller.yml

- name: install utils for fiddling with ethernet bridges
  become: yes
  become_user: root
  package: name=bridge-utils state=present

- name: (Ubuntu - For versions without systemd) configuring...
  become: yes
  become_user: root
  when: ansible_distribution == "Ubuntu" and ansible_distribution_major_version|int < 16
  include: Debian.yml

- name: (Ubuntu - Xenial onwards...) configuring...
  become: yes
  become_user: root
  when: ansible_distribution == "Ubuntu" and ansible_distribution_major_version|int >= 16
  include: Ubuntu.yml

- name: (RedHat) configuring...
  become: yes
  become_user: root
  when: ansible_os_family == 'RedHat'
  include: RedHat.yml
  
- name : launch docker...
  become: yes
  become_user: root
  service: name=docker state=started enabled=yes


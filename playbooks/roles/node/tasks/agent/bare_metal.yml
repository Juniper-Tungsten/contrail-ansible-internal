---
- name: Install kernel headers to compile vrouter module
  package: name="{{ item }}" state=present
  with_items: "{{ kernel_source_packages }}"

- name: "Fail if external_vrouter_compile is true and unsupported OS family"
  shell: "echo 'Unsupported OS family for external vrouter compilation {{ ansible_os_family }}';false"
  when: external_vrouter_compile and ansible_os_family != 'RedHat'

- name: Create vars/contrail_bare_metal_agent.yml (tasks from ../contrailctl/bare_metal_agent/bare_metal.yml)
  include: "../contrailctl/bare_metal_agent/configure.yml"


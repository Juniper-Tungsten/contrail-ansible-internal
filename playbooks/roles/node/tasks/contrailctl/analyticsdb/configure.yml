---
- name: Configure contrailctl/analyticsdb.conf GLOBAL section
  ini_file: dest="{{ contrailctl_config_directory }}/analyticsdb.conf" section=GLOBAL option={{ item.key }} value={{ item.value }}  create=yes
  with_dict: "{{ global_config_orig | combine(analyticsdb_config | default({})) }}"

- name: Configure contrailctl/analyticsdb.conf KEYSTONE section
  ini_file: dest="{{ contrailctl_config_directory }}/analyticsdb.conf" section=KEYSTONE option={{ item.key }} value={{ item.value }}  create=yes
  with_dict: "{{ keystone_config | default({}) }}"
  when: cloud_orchestrator == "openstack"

- name: Configure contrailctl/analyticsdb.conf CASSANDRA section
  ini_file: dest="{{ contrailctl_config_directory }}/analyticsdb.conf" section=CASSANDRA option={{ item.key }} value={{ item.value }}  create=yes
  with_dict: "{{ cassandra_config | default({}) }}"

---
- name: Configure webui configs in config.global.js
  template: src="config.gobal.js.j2" dest=/etc/contrail/config.global.js owner=root group=root mode=0644
  notify:
    - restart webui
    - restart webui-middleware

- name: Configure webui static user auth
  template: src="contrail-webui-userauth.js.j2" dest=/etc/contrail/contrail-webui-userauth.js owner=root group=root mode=0644
  notify:
    - restart webui
    - restart webui-middleware

# Service management
- name: Make sure contrail-webui service is up
  supervisorctl: name="contrail-webui" state=started config=/etc/contrail/supervisord_webui.conf
  tags: [service, contrail.contrail-webui.service, contrail.controller.service, contrail.webui.service]

- name: Make sure contrail-webui-middleware service is up
  supervisorctl: name="contrail-webui-middleware" state=started config=/etc/contrail/supervisord_webui.conf
  tags: [service, contrail.webui-middleware.service, contrail.controller.service, contrail.webui.service]

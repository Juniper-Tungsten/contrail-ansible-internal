---
- name: Do not auto start supervisor-webui (WA for issue contrail-docker/16)
  lineinfile: dest=/etc/sensitive_services line=supervisor-webui state=present create=yes

- name: install nodejs version 0.10.35-1contrail1 - this is required for contrail-webui
  apt: name=nodejs=0.10.35-1contrail1 state=present force=yes

- name: install contrail-webui related packages
  apt: name={{ item }} state=latest force=yes
  with_items: "{{ webui_packages }}"

- name: Remove supervisor-webui from /etc/sensitive_servies (WA for issue contrail-docker/16)
  lineinfile: dest=/etc/sensitive_services line=supervisor-webui state=absent

# Changing minfds need to be done in install stage as supervisord itself need to be restarted after that
# and it is managed by container entrypoint script and not by ansible.
- name: change minfds for supervisord_webui
  ini_file: dest=/etc/contrail/supervisord_webui.conf section=supervisord option=minfds value={{ supervisord_webui_minfds }}

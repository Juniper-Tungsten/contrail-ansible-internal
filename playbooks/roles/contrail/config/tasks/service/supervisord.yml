---
# Service management
- name: Make sure config api service is up
  supervisorctl: name="contrail-api:0" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.api.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure device-manager service is up
  supervisorctl: name="contrail-device-manager" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.device-manager.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure contrail discovery service is up
  supervisorctl: name="contrail-discovery" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.discovery.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure ifmap is up
  supervisorctl: name="ifmap" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.ifmap.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure config nodemanager service is up
  supervisorctl: name="contrail-config-nodemgr" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.config.nodemgr.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure schema service is up
  supervisorctl: name="contrail-schema" state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.schema.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

- name: Make sure contrail svc-monitor service is up
  supervisorctl: name=contrail-svc-monitor state=started config=/etc/contrail/supervisord_config.conf
  tags: [service, contrail.svc-monitor.service, contrail.controller.service, contrail.config.service]
  when: supervisor_config_ready

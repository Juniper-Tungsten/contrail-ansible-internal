---
- name: configure svc-monitor DEFAULTS section
  ini_file: dest={{ svc_monitor_conf }} section=DEFAULTS option="{{ item.key }}" value="{{ item.value }}"  create=yes
  notify:
    - restart svc-monitor supervisord
    - restart svc-monitor systemd
  with_dict:
    ifmap_server_ip: "{{ ifmap_server_ip }}"
    ifmap_server_port: "{{ ifmap_server_port }}"
    ifmap_username: "{{ svc_monitor_ifmap_username }}"
    ifmap_password: "{{ svc_monitor_ifmap_password }}"
    cassandra_server_list: "{{ configdb_servers_with_port }}"
    api_server_ip: "{{ api_server_ip }}"
    api_server_port: "{{ api_server_port }}"
    api_server_use_ssl: "{{ api_server_use_ssl }}"
    log_file: "{{ svc_monitor_log }}"
    log_local: 1
    log_level: "{{ svc_monitor_log_level }}"
    collectors: "{{ analytics_collectors_with_port }}"
    zk_server_ip: "{{ zk_servers_with_port }}"
    rabbit_server: "{{ rabbitmq_servers_with_port }}"
    region_name: "{{ region }}"

- name: configure svc-monitor SCHEDULER section
  ini_file: dest={{ svc_monitor_conf }} section=SCHEDULER option="{{ item.key }}" value="{{ item.value }}"  create=yes
  notify:
    - restart svc-monitor supervisord
    - restart svc-monitor systemd
  with_dict:
    analytics_server_ip: "{{ analytics_server_ip }}"
    analytics_server_port: "{{ analytics_server_port }}"

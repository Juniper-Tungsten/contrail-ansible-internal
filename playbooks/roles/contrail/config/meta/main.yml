---
dependencies:
  - contrail/common

  - role: rabbitmq
    rabbitmq_ssl: "{{ contrail_rabbitmq_ssl }}"
    rabbitmq_os_package: "{{ contrail_rabbitmq_os_package }}"
    rabbitmq_remove_default_user: "{{ contrail_rabbitmq_remove_default_user }}"
    rabbitmq_conf_tcp_listeners_address: "{{ contrail_rabbitmq_listen_address }}"
    rabbitmq_allow_remote_guest: "{{ contrail_rabbitmq_allow_remote_guest }}"
    rabbitmq_nodes: "{{ rabbitmq_server_list }}"
    setup_rabbitmq: "{{ contrail_rabbitmq_setup }}"
    tags: [rabbitmq]
    when: enable_config_service

  - role: cassandra
    cassandra_cql_port: "{{ configdb_cql_port }}"
    cassandra_rpc_port: "{{ configdb_port }}"
    cassandra_rmi_port: "{{ configdb_rmi_port }}"
    cassandra_storage_port: "{{ configdb_storage_port }}"
    cassandra_ssl_storage_port: "{{ configdb_ssl_storage_port }}"
    cassandra_deps: "{{ configdb_cassandra_deps }}"
    cassandra_seeds: "{{ configdb_server_list }}"
    cassandra_packages: "{{ configdb_cassandra_packages }}"
    cassandra_cluster_name: "{{ configdb_cassandra_cluster_name }}"
    tags: [configdb]
    when: enable_config_service

  - role: zookeeper
    zookeeper_debian_apt_install: true
    zookeeper_hosts: "{{ zk_server_list }}"
    tags: [zookeeper]
    when: enable_config_service

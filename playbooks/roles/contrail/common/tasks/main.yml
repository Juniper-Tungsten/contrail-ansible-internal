---
- name: include OS specific code
  include: "{{item}}"
  with_first_found:
    - files:
      - "{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml"
      - "{{ ansible_distribution }}.yml"
      - "{{ ansible_os_family }}.yml"
      skip: true

- name: Create directory /var/log/contrail
  file: path=/var/log/contrail state=directory
  tags: [package, install]

- include: keystoneauth.yml
  when: cloud_orchestrator == "openstack" and ( "'contrail-controllers' in group_names" or "'contrail-analytics' in group_names" )
  tags: [contrail.common.keystoneauth, contrail.common.keystoneauth.configure, configure]

- include: vncapi.yml
  when: cloud_orchestrator == "openstack"
  tags: [contrail.common.vncapi, contrail.common.vncapi.configure, configure]
